{% extends 'base.html' %}

{% block breadcrumb %}
  <li class="breadcrumb-item active"><a href="{% url 'display_articles' %}">Articles</a></li>
  <li class="breadcrumb-item active">{{ article.title }}</li>
{% endblock %}
{% load static %}
{% block content %}
{% block javascript %}
  <script src="{% static 'js/ckeditor/ckeditor.js' %}"></script>
  <script type="text/javascript">
    CKEDITOR.replace( 'editor' );
  </script>
{% endblock %}
<div>
<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link  btn btn-outline-primary" href="{% url 'article_view' article.pk %}">View</a>
  </li>
  {% if user.is_authenticated %}
  <li class="nav-item">
    <a class="nav-link active btn btn-outline-primary" href="{% url 'article_edit' article.pk %}">Edit</a>
  </li>
  <li class="nav-item active">
    <a class="nav-link  btn btn-outline-primary" href="{% url 'article_delete' article.pk %}">Delete</a>
  </li>
  <li class="nav-item ">
    <a class="nav-link  btn btn-outline-primary" href="{% url 'article_revision' article.pk %}">Revisions</a>
  </li>
  {% endif %}
</ul>
</div>
<br/>
{% load permission_tags %}
{% if user|can:'edit_article' %}
<form method="post">
  {% csrf_token %}
  <div class="form-group">
    <label for="title">Title</label>
    <input type="text" class="form-control" id="title" name="title" placeholder="give a title to the content" value='{{article.title}}' required>
    <div class="invalid-feedback"></div>
  </div>
  <div class="form-group">
    <label for="body">Body</label>
    <textarea id ="editor" class="form-control" name="body" >{{article.body}}</textarea>
    <small id="bodyhelp" class="form-text text-muted">You can create your content in 4000 words.</small>
  </div>
  <button type="submit" class="btn btn-outline-info">Update</button>
</form>
{% else %}

<div class="panel panel-default">
<div class="panel-body"><div class="alert alert-danger" role="alert"><samp>You cannot edit this article</samp></div>
{% endif %}
</div>
{% endblock %}