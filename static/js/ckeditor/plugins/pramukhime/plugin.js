/**
* @license
* PramukhIME CKEditor Plugin v 4.0.0 - http://www.vishalon.net/pramukhime/ckeditor-plugin
* Copyright (c) 2005-2017 Vishal Monpara (http://www.vishalon.net)
* 
* License:
* Please read license.html file for detailed license terms.
* 
* License Summary
*   Personal and Commercial use - Allowed (Except noted below)
*   Use in Software as a Service (SaaS), Distribution Application/Module/Add-on/Plugin, OEM - Not Allowed
*   Modify source code or any file? - Not Allowed
*   Hosting for sharing/distribution - Not Allowed
*/
CKEDITOR.plugins.add("pramukhime",{requires:["richcombo"],lang:"en",hidpi:!0,init:function(e){var t,a,i,n,l,s=this,o=e.config,u=CKEDITOR.tools.extend({keyboards:[{js_file:"pramukhindic.js",kb_class_name:"PramukhIndic"}],languages:[],selected_value:"pramukhime:english",create_dedicated_pramukhime:!1,files_externally_loaded:!1,toggle_key:{key:120,ctrl:!1,alt:!1,title:"F9"}},o.pramukhime_options,!0),g=0,m=e.lang.pramukhime;e.ui.addRichCombo("PramukhIME",{command:"PramukhIME",label:m.pramukhime_title,title:m.pramukhime_title,toolbar:"pramukhime",modes:{wysiwyg:1,source:1},panel:{css:[CKEDITOR.skin.getPath("editor")].concat(o.contentsCss),multiSelect:!1,attributes:{"aria-label":m.pramukhime_title}},init:function(){var t,a,i=0,n=e.pramukhime.getLastLanguage(),l=n.kb+":"+n.language;for(this.startGroup(m.pramukhime_languages_title),i=0,t=u.languages.length;t>i;i++)a=u.languages[i],this.add(a.value,a.text+(a.value===l?" ("+u.toggle_key.title+")":""),a.text);this.commit()},onClick:function(t){var a=t.split(":");e.pramukhime.setLanguage(a[1],a[0])},onRender:function(){t=this,e.on("selectionChange",function(t){"undefined"!=typeof e.pramukhime&&r()})}}),CKEDITOR.dialog.add("PramukhIMEHelpDialog",function(e){var t=function(e){return CKEDITOR.tools.getNextId()+"_"+e},a=e.pramukhime,i=e.lang.pramukhime,n={language:"",kb:""},l=t("quickhelp"),o=t("helpifr"),u=t("about");return{title:i.help_title,minWidth:570,minHeight:450,buttons:[CKEDITOR.dialog.cancelButton],onShow:function(){var e=a.getLanguage(),t=CKEDITOR.document;if(n.language!==e.language||n.kb!==e.kb){n=e;var g=i[n.kb],m=s.path;t.getById(l).setHtml(g.help_quick_help1+'<br /><div class="pi_quickhelpimg"> <img src="'+m+"img/"+a.getHelpImage()+'" alt="'+g[e.language]+'"/></div>'+g.help_quick_help2),t.getById(o).$.src=m+"help/"+a.getHelp(),t.getById(u).setHtml(i.help_about_ime+g.help_about_kb)}},contents:[{id:"quick_help",label:i.help_quick_help,elements:[{type:"html",html:'<style  type="text/css">.pi_quickhelpimg {max-height:350px; max-width:560px; overflow:auto;}</style><div id="'+l+'"></div>'}]},{id:"detailed_help",label:i.help_detailed_help,elements:[{type:"html",html:'<span></span><iframe id="'+o+'" src="" style="width:100%; border:0px; height:410px;"></iframe>'}]},{id:"about",label:i.help_about,elements:[{type:"html",className:"pi_about",html:'&nbsp;<br /><style  type="text/css">.pi_about a:hover, .pi_about a:link, .pi_about a:visited, .pi_about a:active {cursor:pointer !important; color:blue !important; text-decoration:underline !important;}</style><div id="'+u+'"></div>'}]}]}}),CKEDITOR.dialog.add("PramukhIMEResetSettingsDialog",function(e){var t=e.lang.pramukhime;return{title:t.reset_settings_title,minWidth:200,minHeight:50,onOk:function(){e.pramukhime.resetSettings()},contents:[{elements:[{type:"html",html:t.reset_settings_desc}]}]}}),CKEDITOR.dialog.add("PramukhIMESettingsDialog",function(e){var t=e.lang.pramukhime;return{title:t.settings_title,minWidth:200,minHeight:50,onShow:function(){var a=e.pramukhime,i=a.getLanguage();this.parts.title.setHtml(t[i.kb].settings),this.setupContent(a.getKeyboard().getSettings(i.language))},onOk:function(){var t=e.pramukhime,a=t.getLanguage(),i=t.getKeyboard().getSettings(a.language);this.commitContent(i),t.setSettings(i)},contents:[{elements:e.pramukhime.getKeyboard().getSettingsItems(t)}]}}),e.addCommand("PramukhIMEToggleLanguage",{exec:function(e){e.pramukhime.toggleLanguage()},modes:{wysiwyg:1,source:1}}),e.addCommand("PramukhIMEHelp",CKEDITOR.tools.extend(new CKEDITOR.dialogCommand("PramukhIMEHelpDialog"),{modes:{wysiwyg:1,source:1},state:CKEDITOR.TRISTATE_OFF})),e.addCommand("PramukhIMEResetSettings",CKEDITOR.tools.extend(new CKEDITOR.dialogCommand("PramukhIMEResetSettingsDialog"),{modes:{wysiwyg:1,source:1},state:CKEDITOR.TRISTATE_OFF})),e.addCommand("PramukhIMESettings",CKEDITOR.tools.extend(new CKEDITOR.dialogCommand("PramukhIMESettingsDialog"),{modes:{wysiwyg:1,source:1},state:CKEDITOR.TRISTATE_OFF})),e.ui.addButton("PramukhIMEHelp",{label:m.pramukhimehelp_desc,command:"PramukhIMEHelp",toolbar:"pramukhime",onRender:function(){a=this}}),e.ui.addButton("PramukhIMESettings",{label:m.settings_title,command:"PramukhIMESettings",toolbar:"pramukhime",onRender:function(){i=this}}),e.ui.addButton("PramukhIMEResetSettings",{label:m.reset_settings_title,command:"PramukhIMEResetSettings",toolbar:"pramukhime",onRender:function(){l=this}}),e.ui.addButton("PramukhIMEToggleLanguage",{label:m.pramukhimetogglelanguage_desc,command:"PramukhIMEToggleLanguage",toolbar:"pramukhime",onRender:function(){n=this}});var r=function(){if("undefined"!=typeof e.pramukhime){for(var a=e.pramukhime.getLanguage(),i=e.pramukhime.getLastLanguage(),n=a.kb+":"+a.language,l=i.kb+":"+i.language,s=!1,o=u.languages,g=0,r=o.length;r>g;g++)if(o[g].value===n){s=!0;break}if(s?t.setValue(n,m[a.kb][a.language]):t.setValue(""),"undefined"==typeof t._.size&&"undefined"!=typeof t._.list){var d=t._.list.element.getDocument(),h=t._.list._.items,p=[];for(var k in h)p=k.split(":"),d.getById(h[k]+"_option").setHtml(m[p[0]][p[1]]);"undefined"!=typeof h[l]&&d.getById(h[l]+"_option").setHtml(m[i.kb][i.language]+" ("+u.toggle_key.title+")")}}},d=function(){if("undefined"!=typeof e.pramukhime){var t=e.pramukhime.getLanguage();e.pramukhime.hasHelp()?e.getCommand("PramukhIMEHelp").setState(CKEDITOR.TRISTATE_OFF):e.getCommand("PramukhIMEHelp").setState(CKEDITOR.TRISTATE_DISABLED),CKEDITOR.document.getById(a._.id).$.firstChild.className="cke_button_icon cke_button__pramukhimehelp_icon pi-"+t.kb+"-"+t.language+"-help"}},h=function(){if("undefined"!=typeof e.pramukhime){var t=e.pramukhime.getLastLanguage();CKEDITOR.document.getById(n._.id).$.firstChild.className="cke_button_icon cke_button__pramukhimetogglelanguage_icon pi-"+t.kb+"-"+t.language}},p=function(){if("undefined"!=typeof e.pramukhime){e.pramukhime.hasSettings()?e.getCommand("PramukhIMESettings").setState(CKEDITOR.TRISTATE_OFF):e.getCommand("PramukhIMESettings").setState(CKEDITOR.TRISTATE_DISABLED);var t=e.pramukhime.getLanguage();CKEDITOR.document.getById(i._.id).$.firstChild.className="cke_button_icon cke_button__pramukhimesettings_icon pi-"+t.kb+"-"+t.language+"-settings"}},k=function(){if("undefined"!=typeof e.pramukhime){var t=e.pramukhime.getLanguage();CKEDITOR.document.getById(l._.id).$.firstChild.className="cke_button_icon cke_button__pramukhimeresetsettings_icon pi-"+t.kb+"-"+t.language+"-resetsettings"}},c=function(){t&&r(),a&&d(),i&&p(),l&&k(),n&&h()},_=function(){if(0===g)return void g++;var t=e,a=u.create_dedicated_pramukhime?pramukhIME.createPramukhIME():pramukhIME;t.pramukhime=a,a.on("languagechange",c),a.setToggleKey(u.toggle_key.key,u.toggle_key.ctrl||!1,u.toggle_key.alt||!1);for(var i,n,l,s,o=u.languages.length>0,r=0,d=u.keyboards.length,h={};d>r;r++){if(h=u.keyboards[r],"undefined"==typeof h.kb_class_name)return!0;if(s=CKEDITOR.document.getWindow().$[h.kb_class_name],n=new s,a.addKeyboard(n),!o){l=n.getKeyboardName().toLowerCase(),i=n.getLanguages();for(var p=0,k=i.length;k>p;p++)u.languages.push({value:l+":"+i[p],text:m[l][i[p]]})}}o||u.languages.push({value:"pramukhime:english",text:m.pramukhime.english});var _=u.selected_value.split(":");a.setLanguage(_[1],_[0]);var f=function(){t.readOnly||(a.enable([t.editable().$]),c())};f(),t.on("mode",f,e),t.on("readOnly",function(){CKEDITOR.tools.setTimeout(f,100,this)},e,null,1e3)};if(u.files_externally_loaded)g+=1;else{var f=[],I=s.path,b=CKEDITOR.tools.indexOf(this.lang,e.langCode)>=0?e.langCode:this.lang,E=[];f.push(I+"js/pramukhime.js");for(var y=0,C=u.keyboards.length,T={};C>y;y++)T=u.keyboards[y],"undefined"!=typeof T.js_file&&(f.push(I+"js/"+T.js_file),f.push(I+"lang/"+(T.i18n_js_file||b+"_"+T.kb_class_name.toLowerCase())+".js"),E.push(I+"/js/"+T.kb_class_name.toLowerCase()+"_settings.js"),CKEDITOR.document.appendStyleSheet(I+"css/"+T.kb_class_name.toLowerCase()+".css"));CKEDITOR.scriptLoader.load(f,function(){CKEDITOR.scriptLoader.load(E),_()},this)}e.on("instanceReady",_,this)}}),CKEDITOR.plugins.addLang=function(e,t,a){var i=this.get(e),n=i.langEntries||(i.langEntries={}),l=i.lang||(i.lang=[]);-1==CKEDITOR.tools.indexOf(l,t)&&l.push(t),n[t]=CKEDITOR.tools.extend(n[t],a)};